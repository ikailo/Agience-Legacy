using Agience.SDK;
using Microsoft.SemanticKernel;
using System.ComponentModel;

namespace Agience.Plugins.Primary
{
    public class Process
    {   

        [KernelFunction, Description("Handle the user's input.")]
        protected async Task<Data?> Input(Runner runner, Data? input = null)
        {
            //runner.AddContext($"USER: {input}");

            // Make a plan
            //var plan = await runner.DispatchAsync<Plan>(input);

            //runner.AddContext($"SYSTEM: Created Plan - {string.Join("; ", JsonSerializer.Deserialize<string[]>(plan.Output?["steps"] ?? string.Empty) ?? Array.Empty<string>())}");

            // Execute the plan
            //var execute = await plan.Runner.DispatchAsync<Execute>(plan.Output);

            //runner.AddContext($"SYSTEM: Executed plan with output '{execute.Output}'");

            //return execute.Output;
            throw new NotImplementedException();
        }
    }
}